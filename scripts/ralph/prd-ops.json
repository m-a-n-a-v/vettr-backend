{
  "project": "VETTR Ops Dashboard",
  "phase": "Phase 1",
  "branchName": "ralph/vettr-ops",
  "description": "Full-stack admin operations dashboard for the VETTR platform. Backend extends the existing Hono/Drizzle API with generic CRUD, analytics, export, and bulk operation endpoints under /admin/*. Frontend is a React 18 + TypeScript + Vite SPA with TailwindCSS v4, TanStack Query, and Recharts for managing all 14 database tables, viewing analytics, and performing bulk operations. Admin auth via X-Admin-Secret header.",
  "totalStories": 65,
  "userStories": [
    {
      "id": "OPS-001",
      "title": "Create generic admin CRUD service",
      "description": "As an admin, I want a reusable CRUD service layer so that all database tables can be managed through consistent list/get/create/update/delete operations without duplicating code for each table.",
      "acceptanceCriteria": [
        "Create file src/services/admin-crud.service.ts in the vettr-backend project",
        "Export a class AdminCrudService with generic methods: listRecords<T>(table, config, params), getById<T>(table, primaryKey, id), createRecord<T>(table, data), updateRecord<T>(table, primaryKey, id, data), deleteRecord(table, primaryKey, id)",
        "listRecords accepts pagination params (limit: number default 25, offset: number default 0) and returns { items: T[], pagination: PaginationMeta } using the existing PaginationMeta type from src/types/pagination.ts",
        "listRecords supports search param (string) that performs ILIKE '%search%' across configured text columns joined with OR conditions using drizzle-orm's ilike and or operators",
        "listRecords supports sort param (column:asc|desc string) defaulting to createdAt:desc, validated against allowed sortable columns",
        "listRecords supports filter params as Record<string, string> for exact-match filtering on configured filterable columns using drizzle-orm's eq operator",
        "getById throws NotFoundError (from src/utils/errors.ts) when record does not exist",
        "deleteRecord throws NotFoundError when record does not exist, returns { deleted: true }",
        "All local imports use .js extension (e.g., import from '../utils/errors.js')",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 1,
      "passes": true
    },
    {
      "id": "OPS-002",
      "title": "Create admin CRUD route factory",
      "description": "As an admin, I want a route factory that auto-generates RESTful CRUD endpoints for any Drizzle table so that new admin routes can be added with minimal boilerplate.",
      "acceptanceCriteria": [
        "Create file src/routes/admin-crud.factory.ts in the vettr-backend project",
        "Export function createAdminCrudRoutes(config: { tableName: string, table: PgTable, primaryKey: string, searchableColumns: string[], filterableColumns: string[], sortableColumns: string[] }) that returns a Hono router instance",
        "Generated router includes GET / that calls AdminCrudService.listRecords with query params: limit (number), offset (number), search (string), sort (string column:direction), and dynamic filter_* params for each filterable column",
        "Generated router includes GET /:id that calls AdminCrudService.getById and returns success(record) using the response helper from src/utils/response.ts",
        "Generated router includes POST / that calls AdminCrudService.createRecord with JSON body and returns success(record) with 201 status",
        "Generated router includes PUT /:id that calls AdminCrudService.updateRecord with JSON body and returns success(record)",
        "Generated router includes DELETE /:id that calls AdminCrudService.deleteRecord and returns success({ deleted: true })",
        "All query params are validated: limit must be positive integer max 100, offset must be non-negative integer, sort must match column:(asc|desc) pattern",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 2,
      "passes": true
    },
    {
      "id": "OPS-003",
      "title": "Add CSV/JSON export endpoint to CRUD factory",
      "description": "As an admin, I want to export table data as CSV or JSON files so that I can analyze data offline or share it with stakeholders.",
      "acceptanceCriteria": [
        "Add GET /export route to the router generated by createAdminCrudRoutes in src/routes/admin-crud.factory.ts",
        "Accepts query param format=csv|json (default json), plus all the same search, sort, and filter params as the list endpoint",
        "When format=csv: sets Content-Type to text/csv, sets Content-Disposition to attachment; filename={tableName}-export.csv, returns CSV with header row derived from column names and data rows",
        "When format=json: sets Content-Type to application/json, returns the array of records directly (no pagination wrapper)",
        "Export fetches ALL matching records (no pagination limit applied) by calling listRecords with a very large limit (e.g., 100000) and offset 0",
        "CSV generation properly escapes values containing commas, quotes, and newlines by wrapping in double quotes",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 3,
      "passes": true
    },
    {
      "id": "OPS-004",
      "title": "Add bulk operations to CRUD factory",
      "description": "As an admin, I want to bulk create and bulk delete records so that I can efficiently manage large datasets without making individual API calls.",
      "acceptanceCriteria": [
        "Add POST /bulk route to the router generated by createAdminCrudRoutes in src/routes/admin-crud.factory.ts",
        "POST /bulk accepts JSON body { records: Array<object> }, validates that records is a non-empty array, inserts all records into the table using drizzle db.insert(table).values(records), returns success({ created: number }) with the count of inserted records",
        "Add DELETE /bulk route to the factory-generated router",
        "DELETE /bulk accepts JSON body { ids: string[] }, validates that ids is a non-empty array of strings, deletes all matching records using drizzle's inArray operator on the primary key column, returns success({ deleted: number }) with count of deleted records",
        "Both endpoints return ValidationError (422) if body validation fails (empty array, missing field, wrong types)",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 4,
      "passes": true
    },
    {
      "id": "OPS-005",
      "title": "Update CORS to allow ops dashboard origin",
      "description": "As an admin, I want the backend to accept requests from the ops dashboard running on localhost:5173 so that the frontend can communicate with the API during development.",
      "acceptanceCriteria": [
        "Update the CORS configuration in src/app.ts to support multiple origins: parse CORS_ORIGIN as a comma-separated string and pass an array to the cors() middleware origin option, or use a function that checks against the list",
        "The default CORS_ORIGIN value in src/config/env.ts should remain '*' for backward compatibility",
        "When CORS_ORIGIN is set to e.g. 'http://localhost:5173,http://localhost:3000', both origins are allowed",
        "Preflight OPTIONS requests return correct Access-Control-Allow-Origin, Access-Control-Allow-Headers (including X-Admin-Secret), and Access-Control-Allow-Methods headers",
        "Existing CORS behavior for mobile clients (origin: '*') is not broken when CORS_ORIGIN remains the default",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 5,
      "passes": true
    },
    {
      "id": "OPS-006",
      "title": "Register admin CRUD routes for users table",
      "description": "As an admin, I want CRUD endpoints for the users table so that I can view, create, edit, and delete user accounts from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, import createAdminCrudRoutes from './admin-crud.factory.js' and the users table from '../db/schema/index.js'",
        "Call createAdminCrudRoutes with config: tableName 'users', table users, primaryKey 'id', searchableColumns ['email', 'displayName'], filterableColumns ['tier', 'authProvider'], sortableColumns ['email', 'displayName', 'tier', 'createdAt', 'updatedAt']",
        "Mount the returned router at /users path within the adminRoutes router so the full path is /v1/admin/users",
        "GET /v1/admin/users returns paginated list with { success: true, data: { items: [...], pagination: { total, limit, offset, has_more } }, meta: { timestamp, request_id } }",
        "GET /v1/admin/users/:id returns a single user record wrapped in success()",
        "GET /v1/admin/users?search=john performs ILIKE search on email and displayName columns",
        "GET /v1/admin/users?filter_tier=pro filters to only pro tier users",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 6,
      "passes": true
    },
    {
      "id": "OPS-007",
      "title": "Register admin CRUD routes for stocks table",
      "description": "As an admin, I want CRUD endpoints for the stocks table so that I can manage stock listings from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the stocks table using createAdminCrudRoutes",
        "Config: tableName 'stocks', primaryKey 'id', searchableColumns ['ticker', 'name'], filterableColumns ['exchange', 'sector'], sortableColumns ['ticker', 'name', 'exchange', 'sector', 'marketCap', 'price', 'vetrScore', 'updatedAt']",
        "Mount at /stocks within adminRoutes so full path is /v1/admin/stocks",
        "GET /v1/admin/stocks?search=AAPL searches across ticker and name columns",
        "GET /v1/admin/stocks?filter_sector=Technology filters by sector",
        "GET /v1/admin/stocks?sort=vetrScore:desc sorts by VETR score descending",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 7,
      "passes": true
    },
    {
      "id": "OPS-008",
      "title": "Register admin CRUD routes for executives table",
      "description": "As an admin, I want CRUD endpoints for the executives table so that I can manage executive records from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the executives table using createAdminCrudRoutes",
        "Config: tableName 'executives', primaryKey 'id', searchableColumns ['name', 'title', 'specialization'], filterableColumns ['stockId'], sortableColumns ['name', 'title', 'yearsAtCompany', 'createdAt', 'updatedAt']",
        "Mount at /executives within adminRoutes so full path is /v1/admin/executives",
        "GET /v1/admin/executives?filter_stockId={uuid} filters executives for a specific stock",
        "GET /v1/admin/executives?search=CEO searches name, title, and specialization columns",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 8,
      "passes": true
    },
    {
      "id": "OPS-009",
      "title": "Register admin CRUD routes for filings table",
      "description": "As an admin, I want CRUD endpoints for the filings table so that I can manage regulatory filing records from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the filings table using createAdminCrudRoutes",
        "Config: tableName 'filings', primaryKey 'id', searchableColumns ['title', 'summary'], filterableColumns ['stockId', 'type', 'isMaterial'], sortableColumns ['title', 'type', 'date', 'isMaterial', 'createdAt']",
        "Mount at /filings within adminRoutes so full path is /v1/admin/filings",
        "GET /v1/admin/filings?filter_type=10-K filters by filing type",
        "GET /v1/admin/filings?filter_isMaterial=true filters for material filings",
        "GET /v1/admin/filings?filter_stockId={uuid} filters filings for a specific stock",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 9,
      "passes": true
    },
    {
      "id": "OPS-010",
      "title": "Register admin CRUD routes for alertRules table",
      "description": "As an admin, I want CRUD endpoints for the alertRules table so that I can manage user alert rule configurations from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the alertRules table using createAdminCrudRoutes",
        "Config: tableName 'alert-rules', primaryKey 'id', searchableColumns ['stockTicker', 'ruleType'], filterableColumns ['userId', 'stockTicker', 'ruleType', 'isActive', 'frequency'], sortableColumns ['stockTicker', 'ruleType', 'isActive', 'createdAt', 'lastTriggeredAt']",
        "Mount at /alert-rules within adminRoutes so full path is /v1/admin/alert-rules",
        "GET /v1/admin/alert-rules?filter_userId={uuid} filters rules for a specific user",
        "GET /v1/admin/alert-rules?filter_isActive=true filters for active rules",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 10,
      "passes": true
    },
    {
      "id": "OPS-011",
      "title": "Register admin CRUD routes for alerts table",
      "description": "As an admin, I want CRUD endpoints for the alerts table so that I can view and manage triggered alerts from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the alerts table using createAdminCrudRoutes",
        "Config: tableName 'alerts', primaryKey 'id', searchableColumns ['title', 'message'], filterableColumns ['userId', 'stockId', 'alertType', 'isRead'], sortableColumns ['title', 'alertType', 'triggeredAt', 'isRead']",
        "Mount at /alerts within adminRoutes so full path is /v1/admin/alerts",
        "GET /v1/admin/alerts?filter_alertType=price_change filters by alert type",
        "GET /v1/admin/alerts?filter_isRead=false filters for unread alerts",
        "GET /v1/admin/alerts?filter_userId={uuid} filters alerts for a specific user",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 11,
      "passes": true
    },
    {
      "id": "OPS-012",
      "title": "Register admin CRUD routes for vetrScoreHistory table",
      "description": "As an admin, I want CRUD endpoints for the vetrScoreHistory table so that I can view and manage VETR score calculation history from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the vetrScoreHistory table using createAdminCrudRoutes",
        "Config: tableName 'vetr-score-history', primaryKey 'id', searchableColumns ['stockTicker'], filterableColumns ['stockTicker'], sortableColumns ['stockTicker', 'overallScore', 'pedigreeScore', 'filingVelocityScore', 'redFlagScore', 'growthScore', 'governanceScore', 'calculatedAt']",
        "Mount at /vetr-score-history within adminRoutes so full path is /v1/admin/vetr-score-history",
        "GET /v1/admin/vetr-score-history?filter_stockTicker=AAPL filters scores for a specific stock ticker",
        "GET /v1/admin/vetr-score-history?sort=overallScore:desc sorts by score descending",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 12,
      "passes": true
    },
    {
      "id": "OPS-013",
      "title": "Register admin CRUD routes for redFlagHistory table",
      "description": "As an admin, I want CRUD endpoints for the redFlagHistory table so that I can view and manage detected red flags from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the redFlagHistory table using createAdminCrudRoutes",
        "Config: tableName 'red-flag-history', primaryKey 'id', searchableColumns ['stockTicker', 'description'], filterableColumns ['stockTicker', 'flagType', 'severity'], sortableColumns ['stockTicker', 'flagType', 'severity', 'score', 'detectedAt']",
        "Mount at /red-flag-history within adminRoutes so full path is /v1/admin/red-flag-history",
        "GET /v1/admin/red-flag-history?filter_severity=Critical filters for critical red flags",
        "GET /v1/admin/red-flag-history?filter_flagType=insider_selling filters by flag type",
        "GET /v1/admin/red-flag-history?sort=detectedAt:desc sorts by detection date descending",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 13,
      "passes": true
    },
    {
      "id": "OPS-014",
      "title": "Register admin CRUD routes for syncHistory table",
      "description": "As an admin, I want CRUD endpoints for the syncHistory table so that I can monitor user sync operations from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the syncHistory table using createAdminCrudRoutes",
        "Config: tableName 'sync-history', primaryKey 'id', searchableColumns ['status'], filterableColumns ['userId', 'status'], sortableColumns ['startedAt', 'completedAt', 'itemsSynced', 'status']",
        "Mount at /sync-history within adminRoutes so full path is /v1/admin/sync-history",
        "GET /v1/admin/sync-history?filter_status=failed filters for failed syncs",
        "GET /v1/admin/sync-history?filter_userId={uuid} filters syncs for a specific user",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 14,
      "passes": true
    },
    {
      "id": "OPS-015",
      "title": "Register admin CRUD routes for userSettings table",
      "description": "As an admin, I want CRUD endpoints for the userSettings table so that I can view and manage user preferences from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the userSettings table using createAdminCrudRoutes",
        "Config: tableName 'user-settings', primaryKey 'id', searchableColumns [], filterableColumns ['userId'], sortableColumns ['updatedAt']",
        "Mount at /user-settings within adminRoutes so full path is /v1/admin/user-settings",
        "GET /v1/admin/user-settings?filter_userId={uuid} filters settings for a specific user",
        "POST /v1/admin/user-settings creates a new settings record with { userId, settings } in body",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 15,
      "passes": true
    },
    {
      "id": "OPS-016",
      "title": "Register admin CRUD routes for refreshTokens table",
      "description": "As an admin, I want CRUD endpoints for the refreshTokens table so that I can monitor and revoke user sessions from the ops dashboard.",
      "acceptanceCriteria": [
        "In src/routes/admin.routes.ts, create CRUD routes for the refreshTokens table using createAdminCrudRoutes",
        "Config: tableName 'refresh-tokens', primaryKey 'id', searchableColumns [], filterableColumns ['userId', 'isRevoked'], sortableColumns ['expiresAt', 'isRevoked', 'createdAt']",
        "Mount at /refresh-tokens within adminRoutes so full path is /v1/admin/refresh-tokens",
        "GET /v1/admin/refresh-tokens?filter_userId={uuid} filters tokens for a specific user",
        "GET /v1/admin/refresh-tokens?filter_isRevoked=false filters for active (non-revoked) tokens",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 16,
      "passes": true
    },
    {
      "id": "OPS-017",
      "title": "Admin CRUD for composite primary key tables",
      "description": "As an admin, I want CRUD endpoints for tables with composite primary keys (watchlistItems, filingReads, redFlagAcknowledgments) so that I can manage these junction tables from the ops dashboard.",
      "acceptanceCriteria": [
        "Create custom admin routes (not using the generic factory) for the three composite-PK tables since they lack a single 'id' primary key",
        "Mount watchlistItems routes at /v1/admin/watchlist-items with: GET / (list with pagination, filterable by userId and stockId), POST / (create with { userId, stockId } body), DELETE / (delete by { userId, stockId } body) using drizzle's and(eq(userId), eq(stockId)) for composite key lookup",
        "Mount filingReads routes at /v1/admin/filing-reads with: GET / (list with pagination, filterable by userId and filingId), POST / (create with { userId, filingId }), DELETE / (delete by { userId, filingId })",
        "Mount redFlagAcknowledgments routes at /v1/admin/red-flag-acknowledgments with: GET / (list with pagination, filterable by userId and redFlagId), POST / (create with { userId, redFlagId }), DELETE / (delete by { userId, redFlagId })",
        "All list endpoints return paginated response format: { success, data: { items, pagination }, meta }",
        "POST endpoints return 201 status with the created record wrapped in success()",
        "DELETE endpoints return success({ deleted: true }) or throw NotFoundError if record not found",
        "Register all three route groups in src/routes/admin.routes.ts",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 17,
      "passes": true
    },
    {
      "id": "OPS-018",
      "title": "Specialized admin action endpoints",
      "description": "As an admin, I want specialized action endpoints for changing user tiers, recalculating VETR scores, and re-seeding data so that I can perform operational tasks from the dashboard.",
      "acceptanceCriteria": [
        "Add POST /v1/admin/users/:id/change-tier route in src/routes/admin.routes.ts that accepts JSON body { tier: 'free' | 'pro' | 'premium' }, validates tier is one of the allowed values, updates the user's tier column in the users table, returns success({ id, email, tier }) with the updated user info",
        "Add POST /v1/admin/stocks/:ticker/recalculate-score route that looks up the stock by ticker, invokes the existing VETR score calculation logic (or placeholder if not available), updates the stock's vetrScore field, creates a new vetrScoreHistory record, returns success() with the new score",
        "Add POST /v1/admin/seed/run route that executes the seed script logic from scripts/seed.ts (import and call the seed function, or spawn the process), returns success({ message: 'Seed completed', ... }) with summary of seeded data",
        "Each specialized endpoint validates input: change-tier rejects invalid tier values with ValidationError, recalculate-score returns NotFoundError for unknown tickers",
        "All three endpoints are protected by the existing adminAuthMiddleware (inherited from the adminRoutes.use('*', adminAuthMiddleware) in admin.routes.ts)",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 18,
      "passes": true
    },
    {
      "id": "OPS-019",
      "title": "Admin analytics endpoints",
      "description": "As an admin, I want analytics endpoints returning aggregated data for charts so that the ops dashboard can display meaningful trends and distributions.",
      "acceptanceCriteria": [
        "Add GET /v1/admin/analytics/user-growth route that queries the users table, groups by DATE(created_at) for the last 90 days, returns success({ data: Array<{ date: string, count: number }> }) with daily new user counts",
        "Add GET /v1/admin/analytics/score-distribution route that queries vetrScoreHistory for the latest score per stock ticker, buckets overall_score into ranges (0-20, 21-40, 41-60, 61-80, 81-100), returns success({ data: Array<{ range: string, count: number }> })",
        "Add GET /v1/admin/analytics/red-flag-trends route that queries redFlagHistory grouped by DATE(detected_at) and severity for the last 30 days, returns success({ data: Array<{ date: string, severity: string, count: number }> })",
        "Add GET /v1/admin/analytics/filing-activity route that queries filings grouped by DATE(created_at) for the last 30 days, returns success({ data: Array<{ date: string, count: number }> })",
        "Add GET /v1/admin/analytics/alert-activity route that queries alerts grouped by DATE(triggered_at) for the last 30 days, returns success({ data: Array<{ date: string, count: number }> })",
        "Add GET /v1/admin/analytics/tier-breakdown route that queries users grouped by tier column, returns success({ data: Array<{ tier: string, count: number }> })",
        "Add GET /v1/admin/analytics/stock-health route that returns the 10 stocks with lowest vetrScore and the 10 stocks with most red flags, returns success({ data: { lowest_scores: Array<{ ticker, name, vetr_score }>, most_flags: Array<{ ticker, name, flag_count }> } })",
        "All analytics queries use raw SQL via drizzle-orm's sql template tag for aggregations",
        "Register all analytics routes within adminRoutes in src/routes/admin.routes.ts",
        "All local imports use .js extension",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 19,
      "passes": true
    },
    {
      "id": "OPS-020",
      "title": "Initialize Vite React TypeScript project for ops dashboard",
      "description": "As a developer, I want to initialize the ops dashboard frontend project with Vite, React 18, TypeScript, and all required dependencies so that I have a working build foundation.",
      "acceptanceCriteria": [
        "Initialize a Vite React TypeScript project in /Users/manav/Space/code/vettr-ops-dashboard/ using npm create vite@latest with the react-ts template (or manually create package.json, tsconfig, vite.config.ts, index.html, src/main.tsx)",
        "Install production dependencies: react, react-dom, react-router (v7), @tanstack/react-query (v5), recharts (v2), axios, react-hot-toast",
        "Install dev dependencies: @types/react, @types/react-dom, typescript, @vitejs/plugin-react, tailwindcss (v4), @tailwindcss/vite, postcss, autoprefixer",
        "Configure vite.config.ts with: React plugin, server.proxy for '/v1' forwarding to 'http://localhost:3000/v1' (changeOrigin: true), and the @tailwindcss/vite plugin",
        "Set up TailwindCSS v4 by adding @import 'tailwindcss' to src/index.css (v4 uses CSS-based config, not tailwind.config.js)",
        "Create a minimal src/App.tsx that renders a div with text 'VETTR Ops Dashboard' and basic Tailwind classes",
        "Create src/main.tsx that renders App into the root element",
        "npm run build passes in the /Users/manav/Space/code/vettr-ops-dashboard/ directory"
      ],
      "priority": 20,
      "passes": true
    },
    {
      "id": "OPS-021",
      "title": "Create API client with admin auth interceptor",
      "description": "As a developer, I want a configured Axios API client that automatically attaches the admin secret header and handles auth errors so that all API calls are authenticated.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/lib/api.ts",
        "Create an Axios instance with baseURL '/v1' (which Vite proxy forwards to localhost:3000/v1)",
        "Add request interceptor that reads 'admin_secret' from sessionStorage and adds X-Admin-Secret header to every request",
        "Add response interceptor that on 401 status: clears sessionStorage.removeItem('admin_secret') and redirects to /login using window.location.href = '/login'",
        "Export typed helper functions: apiGet<T>(url, params?), apiPost<T>(url, data?), apiPut<T>(url, data?), apiDelete<T>(url, data?) that wrap the axios instance and return response.data typed as T",
        "Export the raw axios instance as default export for cases where callers need direct access",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 21,
      "passes": true
    },
    {
      "id": "OPS-022",
      "title": "Create login page with admin secret authentication",
      "description": "As an admin, I want a login page where I enter the admin secret so that I can authenticate and access the dashboard.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Login.tsx",
        "Render a centered card with VETTR Ops title, a password-type input for the admin secret, and a Submit button",
        "On form submit: call GET /v1/admin/metrics with the entered secret in X-Admin-Secret header using the API client",
        "If the API returns 200 (success): store the secret in sessionStorage.setItem('admin_secret', secret) and navigate to '/' using React Router's useNavigate",
        "If the API returns an error: display a red error message below the form (e.g., 'Invalid admin secret')",
        "Show a loading spinner or disabled button state while the auth request is in progress",
        "Style the page with TailwindCSS: dark background, white card, proper padding and margins",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 22,
      "passes": true
    },
    {
      "id": "OPS-023",
      "title": "Create app layout with sidebar navigation",
      "description": "As an admin, I want a dashboard layout with a sidebar navigation menu so that I can easily navigate between different admin sections.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/components/Layout.tsx",
        "Render a fixed-width left sidebar (w-64) with navigation links for all sections: Dashboard (/), Users (/users), Stocks (/stocks), Executives (/executives), Filings (/filings), Alert Rules (/alert-rules), Alerts (/alerts), Watchlist Items (/watchlist-items), VETR Scores (/vetr-scores), Red Flags (/red-flags), Red Flag Acks (/red-flag-acks), Sync History (/sync-history), User Settings (/user-settings), Refresh Tokens (/refresh-tokens), Filing Reads (/filing-reads), Bulk Import (/bulk-import)",
        "Highlight the currently active nav link using React Router's useLocation or NavLink with an active class (e.g., bg-blue-700 text-white)",
        "Include a header bar at the top of the content area showing the current page title and a Logout button that clears sessionStorage and redirects to /login",
        "The sidebar should be collapsible on mobile screens (< 768px): a hamburger menu button toggles sidebar visibility",
        "Content area uses <Outlet /> from React Router to render child routes",
        "Style with TailwindCSS: dark sidebar background (bg-gray-900 text-white), light content area (bg-gray-50)",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 23,
      "passes": true
    },
    {
      "id": "OPS-024",
      "title": "Configure React Router with protected routes",
      "description": "As a developer, I want routing configured with auth protection so that unauthenticated users are redirected to the login page.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/router.tsx defining all routes using createBrowserRouter or <Routes> from react-router",
        "Create a ProtectedRoute component that checks sessionStorage for 'admin_secret': if absent, redirect to /login using <Navigate to='/login' />; if present, render <Outlet />",
        "Define route /login rendering Login page (unprotected)",
        "Define all protected routes nested under ProtectedRoute and Layout: / (Dashboard), /users, /users/:id, /stocks, /executives, /filings, /alert-rules, /alerts, /watchlist-items, /vetr-scores, /red-flags, /red-flag-acks, /sync-history, /user-settings, /refresh-tokens, /filing-reads, /bulk-import",
        "Update src/App.tsx to wrap the router in <QueryClientProvider> from @tanstack/react-query and <Toaster> from react-hot-toast",
        "Each protected route can initially render a placeholder component (e.g., div with the page name) until the real page components are built in later stories",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 24,
      "passes": true
    },
    {
      "id": "OPS-025",
      "title": "Create shared UI components library",
      "description": "As a developer, I want reusable UI components so that the dashboard pages have consistent styling and behavior.",
      "acceptanceCriteria": [
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/StatCard.tsx - renders a card with: icon (React node), title (string), value (string or number), optional change (number, displayed as percentage with green/red color based on positive/negative)",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/Badge.tsx - renders a small pill/badge with props: variant ('success' | 'warning' | 'error' | 'info'), label (string). Each variant has distinct background/text color using TailwindCSS classes",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/FormField.tsx - renders a labeled form input with props: label (string), name (string), type (string), value, onChange, error (optional string displayed in red below input), placeholder (optional)",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/Modal.tsx - renders a fixed overlay with centered white card, props: isOpen (boolean), onClose (function), title (string), children (React node). Clicking overlay background calls onClose. Has an X close button in the header",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/ConfirmDialog.tsx - extends Modal with additional props: message (string), onConfirm (function), confirmLabel (string default 'Confirm'), variant ('danger' | 'default'). Renders message text with Cancel and Confirm buttons. Danger variant styles the Confirm button red",
        "Create barrel export at /Users/manav/Space/code/vettr-ops-dashboard/src/components/ui/index.ts exporting all UI components",
        "All components are styled with TailwindCSS utility classes",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 25,
      "passes": true
    },
    {
      "id": "OPS-026",
      "title": "Create generic DataTable component",
      "description": "As an admin, I want a reusable data table component with sorting, pagination, row selection, and actions so that all table pages share consistent behavior.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/components/DataTable.tsx",
        "Accept props: columns (Array<{ key: string, label: string, render?: (value: any, row: any) => ReactNode, sortable?: boolean }>), data (array of row objects), loading (boolean), pagination ({ total, limit, offset, has_more }), onPageChange (function(offset)), onPageSizeChange (function(limit)), onSort (function(column, direction))",
        "Render table headers with column labels; if column.sortable is true, render a sort icon button that calls onSort with the column key and toggled direction (asc/desc)",
        "Render table rows by mapping data through columns, using column.render for custom rendering or defaulting to stringified value",
        "Include checkbox column for row selection: checkbox in header selects/deselects all visible rows, checkbox per row toggles individual selection. Expose selectedRows via onSelectionChange(selectedIds: string[]) callback prop",
        "Include an actions column with Edit and Delete icon buttons per row, calling onEdit(row) and onDelete(row) callback props",
        "Render pagination controls below table: page size selector dropdown (10, 25, 50), previous/next page buttons (disabled when at boundaries), and text showing 'Showing X-Y of Z records'",
        "Show skeleton loading rows (6 rows of gray animated bars) when loading=true",
        "Show centered 'No records found' message with icon when data is empty and loading=false",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 26,
      "passes": true
    },
    {
      "id": "OPS-027",
      "title": "Create search, filter, and export toolbar components",
      "description": "As an admin, I want search, filter, and export controls above data tables so that I can find specific records and download data.",
      "acceptanceCriteria": [
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/SearchInput.tsx - text input with search icon, debounced onChange (300ms delay) that calls onSearch(value: string) prop. Includes a clear (X) button when input has value",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/FilterBar.tsx - accepts filters prop (Array<{ key: string, label: string, options: Array<{ value: string, label: string }> }>). Renders a row of select dropdowns. Calls onFilterChange(filters: Record<string, string>) when any dropdown changes. Has a 'Clear Filters' button that resets all dropdowns",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ExportButton.tsx - dropdown button with 'Export' label. When clicked, shows options: 'Export as CSV' and 'Export as JSON'. Each option calls onExport(format: 'csv' | 'json') prop. Shows a loading spinner inside the button while exporting (controlled via loading prop)",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/BulkActionBar.tsx - shown when selectedCount > 0 (prop). Displays '{selectedCount} items selected' text and a 'Delete Selected' button that calls onBulkDelete() prop. Styled as a sticky bar at the top of the table area with a distinct background color",
        "All components styled with TailwindCSS utility classes and consistent sizing/spacing",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 27,
      "passes": true
    },
    {
      "id": "OPS-028",
      "title": "Create generic useTable hook for CRUD operations",
      "description": "As a developer, I want a generic data-fetching hook that handles pagination, search, sort, filters, and CRUD mutations so that table pages have minimal boilerplate.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/hooks/useTable.ts",
        "Export function useTable<T>(config: { endpoint: string, queryKey: string }) that returns: { data, pagination, isLoading, error, search, setSearch, sort, setSort, filters, setFilters, page, setPage, pageSize, setPageSize, createMutation, updateMutation, deleteMutation, bulkDeleteMutation, refetch }",
        "Use @tanstack/react-query's useQuery to fetch GET /v1/admin/{endpoint} with query params: limit, offset (calculated from page and pageSize), search, sort (as column:direction), and filter_* params spread from the filters object",
        "The query key includes [queryKey, page, pageSize, search, sort, filters] so it auto-refetches when any param changes",
        "createMutation uses useMutation to POST /v1/admin/{endpoint}, with onSuccess that calls queryClient.invalidateQueries({ queryKey: [queryKey] })",
        "updateMutation uses useMutation to PUT /v1/admin/{endpoint}/:id, with onSuccess that invalidates queries",
        "deleteMutation uses useMutation to DELETE /v1/admin/{endpoint}/:id, with onSuccess that invalidates queries",
        "bulkDeleteMutation uses useMutation to DELETE /v1/admin/{endpoint}/bulk with { ids } body, with onSuccess that invalidates queries",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 28,
      "passes": true
    },
    {
      "id": "OPS-029",
      "title": "Create useExport hook for file downloads",
      "description": "As a developer, I want a hook that handles downloading exports from the API so that export buttons can trigger file downloads with loading state.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/hooks/useExport.ts",
        "Export function useExport(endpoint: string) that returns { exportData(format: 'csv' | 'json', filters?: Record<string, string>): Promise<void>, isExporting: boolean }",
        "exportData calls GET /v1/admin/{endpoint}/export?format={format} with current filters as query params, using the API client with responseType 'blob'",
        "On successful response: creates a Blob from the response data, creates an object URL with URL.createObjectURL, creates a temporary <a> element with href and download attribute (filename: {endpoint}-export.{format}), programmatically clicks it to trigger download, then revokes the object URL",
        "isExporting state is true during the download request and false when complete or on error",
        "On error: shows a toast notification using react-hot-toast with the error message",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 29,
      "passes": true
    },
    {
      "id": "OPS-030",
      "title": "Create useAnalytics hooks for dashboard data",
      "description": "As a developer, I want dedicated hooks for each analytics endpoint so that dashboard charts can fetch their data with proper caching and loading states.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/hooks/useAnalytics.ts",
        "Export useMetrics() hook: useQuery with queryKey ['metrics'], fetches GET /v1/admin/metrics, returns { data (the metrics object), isLoading, error }",
        "Export useUserGrowth() hook: useQuery with queryKey ['analytics', 'user-growth'], fetches GET /v1/admin/analytics/user-growth, returns { data: Array<{ date, count }>, isLoading, error }",
        "Export useScoreDistribution() hook: useQuery with queryKey ['analytics', 'score-distribution'], fetches GET /v1/admin/analytics/score-distribution",
        "Export useRedFlagTrends() hook: useQuery with queryKey ['analytics', 'red-flag-trends'], fetches GET /v1/admin/analytics/red-flag-trends",
        "Export useFilingActivity() hook: useQuery with queryKey ['analytics', 'filing-activity'], fetches GET /v1/admin/analytics/filing-activity",
        "Export useAlertActivity() hook: useQuery with queryKey ['analytics', 'alert-activity'], fetches GET /v1/admin/analytics/alert-activity",
        "Export useTierBreakdown() hook: useQuery with queryKey ['analytics', 'tier-breakdown'], fetches GET /v1/admin/analytics/tier-breakdown",
        "Export useStockHealth() hook: useQuery with queryKey ['analytics', 'stock-health'], fetches GET /v1/admin/analytics/stock-health",
        "All hooks extract data from the standard API response shape: response.data.data (since API returns { success, data, meta })",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 30,
      "passes": true
    },
    {
      "id": "OPS-031",
      "title": "Dashboard page with metrics summary cards",
      "description": "As an admin, I want a dashboard overview page showing key system metrics so that I can quickly assess the state of the platform.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Dashboard.tsx",
        "Use the useMetrics() hook to fetch system metrics from GET /v1/admin/metrics",
        "Render a row of StatCard components showing: Total Users (database_stats.users), Total Stocks (database_stats.stocks), Total Filings (database_stats.filings), Total Alerts (database_stats.alerts), Avg Response Time (average_response_time_ms with 'ms' suffix), Uptime (uptime_seconds formatted as hours or days)",
        "Each StatCard has an appropriate icon (use simple SVG or emoji placeholder)",
        "Show skeleton loading cards while metrics are loading (isLoading state)",
        "Show an error message if the metrics request fails",
        "Register this component as the element for the / route in the router",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 31,
      "passes": true
    },
    {
      "id": "OPS-032",
      "title": "Dashboard user growth line chart",
      "description": "As an admin, I want a line chart showing daily new user signups over the past 90 days so that I can track user growth trends.",
      "acceptanceCriteria": [
        "Add a user growth chart section to /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Dashboard.tsx below the metrics cards",
        "Use the useUserGrowth() hook to fetch data from GET /v1/admin/analytics/user-growth",
        "Render a Recharts LineChart with: XAxis showing dates (formatted as MMM DD), YAxis showing count, a Line for daily new users, a Tooltip showing exact date and count on hover",
        "Chart is wrapped in a ResponsiveContainer with width '100%' and height 300",
        "Chart is inside a white card with title 'User Growth (90 Days)' and subtle shadow/border",
        "Show a loading skeleton while data is loading",
        "Show 'No data available' message if the data array is empty",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 32,
      "passes": true
    },
    {
      "id": "OPS-033",
      "title": "Dashboard score distribution bar chart and tier breakdown pie chart",
      "description": "As an admin, I want charts showing VETR score distribution and user tier breakdown so that I can understand score health and subscription metrics.",
      "acceptanceCriteria": [
        "Add a two-column chart section to Dashboard.tsx below the user growth chart",
        "Left column: use useScoreDistribution() hook, render a Recharts BarChart with score range buckets (0-20, 21-40, etc.) on XAxis and count on YAxis, each bar colored by range (red for low, yellow for mid, green for high)",
        "Right column: use useTierBreakdown() hook, render a Recharts PieChart with slices for each tier (free, pro, premium), distinct colors per tier, labels showing tier name and count, and a Legend",
        "Both charts wrapped in ResponsiveContainer with height 300 inside white cards with titles ('VETR Score Distribution' and 'User Tier Breakdown')",
        "Both charts show loading skeletons while data loads",
        "Both charts show 'No data available' when data arrays are empty",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 33,
      "passes": true
    },
    {
      "id": "OPS-034",
      "title": "Dashboard red flags, filing activity, and stock health sections",
      "description": "As an admin, I want charts for red flag trends, filing activity, and a list of unhealthy stocks so that I can monitor risk and data freshness.",
      "acceptanceCriteria": [
        "Add a red flag trends section to Dashboard.tsx: use useRedFlagTrends() hook, render a Recharts AreaChart with stacked areas per severity level (Low, Moderate, High, Critical) over 30 days, XAxis as dates, YAxis as count, distinct colors per severity, Tooltip with all severity counts",
        "Add a filing activity section: use useFilingActivity() hook, render a Recharts BarChart showing daily filing counts for the last 30 days, XAxis as dates, YAxis as count",
        "Add a stock health section: use useStockHealth() hook, render two lists side-by-side in a white card: (1) 'Lowest VETR Scores' table with ticker, name, score columns, (2) 'Most Red Flags' table with ticker, name, flag count columns. Each list shows top 10 stocks",
        "All sections in white cards with titles and proper spacing",
        "Show loading states while data loads",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 34,
      "passes": true
    },
    {
      "id": "OPS-035",
      "title": "Users table page with full CRUD",
      "description": "As an admin, I want a users page with a data table, search, filters, and create/edit modals so that I can manage user accounts.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Users.tsx",
        "Use the useTable hook with endpoint 'users' and queryKey 'admin-users'",
        "Render SearchInput (searches email and displayName), FilterBar with tier filter (options: free, pro, premium) and authProvider filter (options: email, google, apple), ExportButton",
        "Render DataTable with columns: email, displayName, tier (rendered as Badge with variant based on tier), authProvider, createdAt (formatted date), actions (edit/delete)",
        "Create/Edit modal with FormField inputs for: email, displayName, tier (select), authProvider (select). On submit: call createMutation or updateMutation from useTable",
        "Delete action shows ConfirmDialog with danger variant, on confirm calls deleteMutation",
        "BulkActionBar shown when rows are selected, delete calls bulkDeleteMutation",
        "Register as element for /users route in the router",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 35,
      "passes": true
    },
    {
      "id": "OPS-036",
      "title": "User detail page",
      "description": "As an admin, I want a user detail page showing all user information and related data so that I can investigate individual users.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/UserDetail.tsx",
        "Fetch user by ID from GET /v1/admin/users/:id using useQuery with the id from React Router useParams()",
        "Display user profile info in a card: email, displayName, avatarUrl (rendered as image), tier (as Badge), authProvider, createdAt, updatedAt",
        "Show a Change Tier section with three buttons (Free, Pro, Premium) that call POST /v1/admin/users/:id/change-tier and refresh the user data on success, with toast notification",
        "Show related data sections: user's watchlist items (GET /v1/admin/watchlist-items?filter_userId={id}), user's alert rules (GET /v1/admin/alert-rules?filter_userId={id}), user's sync history (GET /v1/admin/sync-history?filter_userId={id}), each as a small DataTable",
        "Show loading state while user data fetches",
        "Show error state with 'User not found' if 404 returned",
        "Register as element for /users/:id route in the router",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 36,
      "passes": true
    },
    {
      "id": "OPS-037",
      "title": "Stocks table page with full CRUD",
      "description": "As an admin, I want a stocks page with a data table, search, filters, and CRUD so that I can manage stock listings.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Stocks.tsx",
        "Use the useTable hook with endpoint 'stocks' and queryKey 'admin-stocks'",
        "Render SearchInput (searches ticker and name), FilterBar with exchange filter and sector filter (options populated from distinct values or hardcoded common values), ExportButton",
        "Render DataTable with columns: ticker, name, exchange, sector, marketCap (formatted with M/B suffix), price (formatted as currency), priceChange (formatted as percentage with green/red color), vetrScore (rendered as Badge: red <40, yellow 40-70, green >70), actions",
        "Create/Edit modal with FormField inputs for: ticker, name, exchange, sector, marketCap, price, priceChange, vetrScore",
        "Include a 'Recalculate Score' button per row that calls POST /v1/admin/stocks/:ticker/recalculate-score and shows toast on success",
        "Delete action with ConfirmDialog, BulkActionBar for bulk delete",
        "Register as element for /stocks route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 37,
      "passes": true
    },
    {
      "id": "OPS-038",
      "title": "Executives table page with full CRUD",
      "description": "As an admin, I want an executives page with a data table and CRUD so that I can manage executive records.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Executives.tsx",
        "Use the useTable hook with endpoint 'executives' and queryKey 'admin-executives'",
        "Render SearchInput (searches name, title, specialization), FilterBar with stockId filter (text input or dropdown), ExportButton",
        "Render DataTable with columns: name, title, yearsAtCompany (formatted to 1 decimal), specialization, education, stockId (truncated UUID), createdAt (formatted date), actions",
        "Create/Edit modal with FormField inputs for: name, title, stockId, yearsAtCompany, education, specialization, socialLinkedin, socialTwitter, previousCompanies (as comma-separated text input that gets split into array on save)",
        "Delete action with ConfirmDialog, BulkActionBar for bulk delete",
        "Register as element for /executives route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 38,
      "passes": true
    },
    {
      "id": "OPS-039",
      "title": "Filings table page with full CRUD",
      "description": "As an admin, I want a filings page with a data table and CRUD so that I can manage regulatory filing records.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Filings.tsx",
        "Use the useTable hook with endpoint 'filings' and queryKey 'admin-filings'",
        "Render SearchInput (searches title and summary), FilterBar with type filter (options: 10-K, 10-Q, 8-K, Press Release, etc.), isMaterial filter (options: true, false), stockId filter, ExportButton",
        "Render DataTable with columns: title (truncated to 60 chars), type, stockId (truncated UUID), date (formatted), isMaterial (rendered as Badge: green 'Material' or gray 'Non-material'), sourceUrl (rendered as clickable link), createdAt, actions",
        "Create/Edit modal with FormField inputs for: stockId, type (select), title, date (date input), summary (textarea), isMaterial (checkbox), sourceUrl",
        "Delete action with ConfirmDialog, BulkActionBar for bulk delete",
        "Register as element for /filings route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 39,
      "passes": true
    },
    {
      "id": "OPS-040",
      "title": "Alert rules table page with full CRUD",
      "description": "As an admin, I want an alert rules page with a data table and CRUD so that I can manage user alert configurations.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/AlertRules.tsx",
        "Use the useTable hook with endpoint 'alert-rules' and queryKey 'admin-alert-rules'",
        "Render SearchInput (searches stockTicker and ruleType), FilterBar with userId filter, ruleType filter, isActive filter (options: true, false), frequency filter, ExportButton",
        "Render DataTable with columns: stockTicker, ruleType, conditionOperator, frequency, threshold, isActive (rendered as Badge: green 'Active' or gray 'Inactive'), lastTriggeredAt (formatted date or 'Never'), createdAt, actions",
        "Create/Edit modal with FormField inputs for: userId, stockTicker, ruleType, triggerConditions (JSON textarea), conditionOperator (select: AND, OR), frequency (select), threshold, isActive (checkbox)",
        "Delete action with ConfirmDialog",
        "Register as element for /alert-rules route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 40,
      "passes": true
    },
    {
      "id": "OPS-041",
      "title": "Alerts table page with full CRUD",
      "description": "As an admin, I want an alerts page with a data table and CRUD so that I can view and manage triggered alerts.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/Alerts.tsx",
        "Use the useTable hook with endpoint 'alerts' and queryKey 'admin-alerts'",
        "Render SearchInput (searches title and message), FilterBar with alertType filter, isRead filter (options: true, false), userId filter, stockId filter, ExportButton",
        "Render DataTable with columns: title, alertType (as Badge), stockId (truncated UUID), userId (truncated UUID), message (truncated to 80 chars), triggeredAt (formatted date), isRead (rendered as Badge: green 'Read' or yellow 'Unread'), actions",
        "Create/Edit modal with FormField inputs for: userId, stockId, alertRuleId, alertType, title, message (textarea), isRead (checkbox)",
        "Delete action with ConfirmDialog, BulkActionBar for bulk delete",
        "Register as element for /alerts route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 41,
      "passes": true
    },
    {
      "id": "OPS-042",
      "title": "Watchlist items table page",
      "description": "As an admin, I want a watchlist items page so that I can view and manage user-stock watchlist associations.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/WatchlistItems.tsx",
        "Fetch data from GET /v1/admin/watchlist-items with useQuery (custom, not useTable, since this is a composite-PK table)",
        "Render FilterBar with userId filter and stockId filter",
        "Render DataTable with columns: userId (truncated UUID), stockId (truncated UUID), addedAt (formatted date), actions (delete only, since there's nothing to edit)",
        "Add button opens a modal to create a new watchlist item with FormField inputs for userId and stockId, POSTs to /v1/admin/watchlist-items",
        "Delete action sends DELETE /v1/admin/watchlist-items with { userId, stockId } body (composite key) after ConfirmDialog confirmation",
        "Show pagination controls",
        "Register as element for /watchlist-items route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 42,
      "passes": true
    },
    {
      "id": "OPS-043",
      "title": "VETR scores table page",
      "description": "As an admin, I want a VETR scores page showing score history with all sub-scores so that I can audit scoring calculations.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/VetrScores.tsx",
        "Use the useTable hook with endpoint 'vetr-score-history' and queryKey 'admin-vetr-scores'",
        "Render SearchInput (searches stockTicker), FilterBar with stockTicker filter, ExportButton",
        "Render DataTable with columns: stockTicker, overallScore (as colored Badge), pedigreeScore, filingVelocityScore, redFlagScore, growthScore, governanceScore, bonusPoints, penaltyPoints, calculatedAt (formatted date), actions",
        "Overall score Badge colors: red for <40, yellow for 40-70, green for >70",
        "Create/Edit modal with FormField inputs for all score fields: stockTicker, overallScore, pedigreeScore, filingVelocityScore, redFlagScore, growthScore, governanceScore, bonusPoints, penaltyPoints",
        "Delete action with ConfirmDialog",
        "Register as element for /vetr-scores route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 43,
      "passes": true
    },
    {
      "id": "OPS-044",
      "title": "Red flags table page",
      "description": "As an admin, I want a red flags page showing detected flags with severity and filtering so that I can monitor risk across stocks.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/RedFlags.tsx",
        "Use the useTable hook with endpoint 'red-flag-history' and queryKey 'admin-red-flags'",
        "Render SearchInput (searches stockTicker and description), FilterBar with severity filter (options: Low, Moderate, High, Critical), flagType filter, stockTicker filter, ExportButton",
        "Render DataTable with columns: stockTicker, flagType, severity (as Badge: info for Low, warning for Moderate, error for High and Critical), score (formatted to 2 decimals), description (truncated to 100 chars), detectedAt (formatted date), actions",
        "Create/Edit modal with FormField inputs for: stockTicker, flagType, severity (select), score, description (textarea)",
        "Delete action with ConfirmDialog",
        "Register as element for /red-flags route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 44,
      "passes": true
    },
    {
      "id": "OPS-045",
      "title": "Red flag acknowledgments table page",
      "description": "As an admin, I want a red flag acknowledgments page so that I can see which users have acknowledged which red flags.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/RedFlagAcks.tsx",
        "Fetch data from GET /v1/admin/red-flag-acknowledgments with useQuery (composite-PK table, custom query not useTable)",
        "Render FilterBar with userId filter and redFlagId filter",
        "Render DataTable with columns: userId (truncated UUID), redFlagId (truncated UUID), acknowledgedAt (formatted date), actions (delete only)",
        "Add button opens modal with FormField inputs for userId and redFlagId, POSTs to /v1/admin/red-flag-acknowledgments",
        "Delete action sends DELETE /v1/admin/red-flag-acknowledgments with { userId, redFlagId } body after ConfirmDialog",
        "Show pagination controls",
        "Register as element for /red-flag-acks route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 45,
      "passes": true
    },
    {
      "id": "OPS-046",
      "title": "Sync history table page",
      "description": "As an admin, I want a sync history page so that I can monitor user sync operations and troubleshoot failures.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/SyncHistory.tsx",
        "Use the useTable hook with endpoint 'sync-history' and queryKey 'admin-sync-history'",
        "Render SearchInput (searches status), FilterBar with status filter (options: pending, success, failed), userId filter, ExportButton",
        "Render DataTable with columns: userId (truncated UUID), status (as Badge: success=green, pending=yellow, failed=red), itemsSynced, startedAt (formatted date), completedAt (formatted date or 'In Progress'), errors (truncated to 80 chars, shown in red if present), actions",
        "Create/Edit modal with FormField inputs for: userId, status (select), itemsSynced, errors (textarea)",
        "Delete action with ConfirmDialog",
        "Register as element for /sync-history route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 46,
      "passes": true
    },
    {
      "id": "OPS-047",
      "title": "User settings table page",
      "description": "As an admin, I want a user settings page so that I can view and manage user preference configurations.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/UserSettings.tsx",
        "Use the useTable hook with endpoint 'user-settings' and queryKey 'admin-user-settings'",
        "Render FilterBar with userId filter, ExportButton",
        "Render DataTable with columns: userId (truncated UUID), settings (rendered as formatted JSON string, truncated to 100 chars with 'View' link to expand), updatedAt (formatted date), actions",
        "Create/Edit modal with FormField inputs for: userId (text input), settings (JSON textarea with syntax validation - show error if invalid JSON)",
        "Delete action with ConfirmDialog",
        "Clicking the 'View' link on settings opens a Modal with the full pretty-printed JSON settings",
        "Register as element for /user-settings route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 47,
      "passes": false
    },
    {
      "id": "OPS-048",
      "title": "Refresh tokens table page",
      "description": "As an admin, I want a refresh tokens page so that I can monitor and revoke user sessions.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/RefreshTokens.tsx",
        "Use the useTable hook with endpoint 'refresh-tokens' and queryKey 'admin-refresh-tokens'",
        "Render FilterBar with userId filter, isRevoked filter (options: true, false), ExportButton",
        "Render DataTable with columns: userId (truncated UUID), tokenHash (truncated to 20 chars with ... for security), expiresAt (formatted date, shown in red if past), isRevoked (Badge: red 'Revoked' or green 'Active'), createdAt (formatted date), actions",
        "Edit modal allows toggling isRevoked status (to revoke a token). Create modal is hidden or minimal since tokens are normally created by the auth system",
        "Include a 'Revoke' quick action button per row that PUTs the token with isRevoked=true and shows a toast notification",
        "Delete action with ConfirmDialog, BulkActionBar for bulk delete (useful for cleanup)",
        "Register as element for /refresh-tokens route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 48,
      "passes": false
    },
    {
      "id": "OPS-049",
      "title": "Filing reads table page",
      "description": "As an admin, I want a filing reads page so that I can see which users have read which filings.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/FilingReads.tsx",
        "Fetch data from GET /v1/admin/filing-reads with useQuery (composite-PK table, custom query not useTable)",
        "Render FilterBar with userId filter and filingId filter",
        "Render DataTable with columns: userId (truncated UUID), filingId (truncated UUID), readAt (formatted date), actions (delete only)",
        "Add button opens modal with FormField inputs for userId and filingId, POSTs to /v1/admin/filing-reads",
        "Delete action sends DELETE /v1/admin/filing-reads with { userId, filingId } body after ConfirmDialog",
        "Show pagination controls",
        "Register as element for /filing-reads route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 49,
      "passes": false
    },
    {
      "id": "OPS-050",
      "title": "Bulk import page with CSV/JSON upload",
      "description": "As an admin, I want a bulk import page where I can upload CSV or JSON files to import records into any table so that I can perform batch data operations.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/pages/BulkImport.tsx",
        "Render a table selector dropdown listing all admin tables (users, stocks, executives, filings, alert-rules, alerts, vetr-score-history, red-flag-history, sync-history, user-settings, refresh-tokens)",
        "Render a file upload area that accepts .csv and .json files via drag-and-drop or file input click",
        "On file upload: parse the file content (CSV using a simple parser that handles headers and rows, JSON parsed with JSON.parse), display a preview DataTable showing the first 10 rows of parsed data with all detected columns",
        "Show total row count and list of detected column headers above the preview",
        "Render an 'Import' button that sends POST /v1/admin/{selectedTable}/bulk with { records: parsedData } body",
        "Show progress/loading state during import, show success toast with count of imported records on completion, show error toast with details on failure",
        "Register as element for /bulk-import route",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 50,
      "passes": false
    },
    {
      "id": "OPS-051",
      "title": "Re-seed data action with confirmation",
      "description": "As an admin, I want a button to re-seed the database from the dashboard so that I can reset demo/development data without accessing the server.",
      "acceptanceCriteria": [
        "Add a 'Re-Seed Database' button to the Dashboard page (Dashboard.tsx) in a 'Quick Actions' section below the charts",
        "Clicking the button opens a ConfirmDialog with danger variant, message: 'This will re-run the seed scripts and may overwrite existing data. Are you sure?', confirmLabel: 'Re-Seed'",
        "On confirm: sends POST /v1/admin/seed/run using the API client, shows a loading spinner on the button",
        "On success: shows a success toast notification with the response message, refreshes all dashboard data by invalidating TanStack Query cache",
        "On error: shows an error toast with the error message from the API response",
        "The Re-Seed button is styled as a warning/destructive action button (amber or red background)",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 51,
      "passes": false
    },
    {
      "id": "OPS-052",
      "title": "Bulk tier change for selected users",
      "description": "As an admin, I want to select multiple users and change their tier in bulk so that I can efficiently manage subscription upgrades/downgrades.",
      "acceptanceCriteria": [
        "Add a 'Change Tier' action to the BulkActionBar in the Users page (Users.tsx) that appears when users are selected",
        "Clicking 'Change Tier' opens a Modal with a tier selector (dropdown with options: free, pro, premium) and a confirmation message showing the count of selected users",
        "On confirm: iterates through selectedUserIds and calls POST /v1/admin/users/:id/change-tier for each user with the selected tier value, using Promise.all for parallel execution",
        "Shows progress: 'Updating X of Y users...' text in the modal during execution",
        "On completion: shows success toast 'Updated {count} users to {tier} tier', closes the modal, invalidates the users query to refresh the table, clears row selection",
        "If any individual update fails: shows a warning toast listing the failed user IDs, but continues with the rest",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 52,
      "passes": false
    },
    {
      "id": "OPS-053",
      "title": "Date and number formatting utilities",
      "description": "As a developer, I want consistent date and number formatting utilities so that all pages display data uniformly.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/lib/formatters.ts",
        "Export formatDate(dateString: string): string - formats ISO date string as 'Jan 15, 2025 3:45 PM' using Intl.DateTimeFormat",
        "Export formatDateShort(dateString: string): string - formats as 'Jan 15' for chart axes",
        "Export formatRelativeTime(dateString: string): string - returns relative time like '2 hours ago', '3 days ago' for recent dates",
        "Export formatNumber(num: number): string - formats with thousand separators (e.g., 1,234,567)",
        "Export formatCurrency(num: number): string - formats as $1,234.56 with 2 decimal places",
        "Export formatMarketCap(num: number): string - formats as $1.5B, $234.5M, etc. with appropriate suffix",
        "Export formatPercentage(num: number): string - formats as +12.5% or -3.2% with sign and color class name",
        "Export truncateUuid(uuid: string): string - returns first 8 characters followed by '...'",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 53,
      "passes": false
    },
    {
      "id": "OPS-054",
      "title": "Client-side CSV generation utility",
      "description": "As a developer, I want a client-side CSV generator so that small datasets can be exported without hitting the backend export endpoint.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/lib/csv.ts",
        "Export function generateCsv(data: Record<string, any>[], columns?: string[]): string - takes an array of objects, optionally filters to specified columns, generates a valid CSV string with header row from object keys and data rows from values",
        "Properly escape CSV values: values containing commas, double quotes, or newlines are wrapped in double quotes; existing double quotes are escaped as double-double-quotes",
        "Export function downloadCsv(csvContent: string, filename: string): void - creates a Blob with text/csv MIME type, creates a download link, programmatically triggers the download, and cleans up",
        "Handle edge cases: empty arrays return just the header row, null/undefined values become empty strings, Date objects are formatted as ISO strings, arrays and objects are JSON-stringified",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 54,
      "passes": false
    },
    {
      "id": "OPS-055",
      "title": "Table column configuration definitions",
      "description": "As a developer, I want centralized column configuration objects for each table so that DataTable columns are consistent and reusable.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/config/columns.ts",
        "Export a column config object for each table (userColumns, stockColumns, executiveColumns, filingColumns, alertRuleColumns, alertColumns, watchlistItemColumns, vetrScoreColumns, redFlagColumns, redFlagAckColumns, syncHistoryColumns, userSettingsColumns, refreshTokenColumns, filingReadColumns)",
        "Each config is an array of { key: string, label: string, sortable: boolean, render?: function } matching the DataTable columns prop shape",
        "Render functions use the formatting utilities from src/lib/formatters.ts: dates use formatDate, UUIDs use truncateUuid, currency uses formatCurrency, etc.",
        "Render functions use Badge component for status fields (tier, severity, isActive, isRead, etc.) with appropriate variant mapping",
        "All column configs are properly typed with TypeScript",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 55,
      "passes": false
    },
    {
      "id": "OPS-056",
      "title": "Toast notification integration",
      "description": "As an admin, I want toast notifications for all CRUD operations so that I get immediate visual feedback when actions succeed or fail.",
      "acceptanceCriteria": [
        "Ensure react-hot-toast <Toaster /> component is rendered in src/App.tsx (should already be there from OPS-024)",
        "Configure Toaster with position 'top-right', duration 4000ms, and custom styling matching the dashboard theme (dark background for errors, green for success)",
        "Add toast.success() calls after successful create, update, delete, and bulk operations in useTable hook mutations' onSuccess callbacks (in src/hooks/useTable.ts)",
        "Add toast.error() calls in onError callbacks for all mutations in useTable, including the error message from the API response",
        "Add toast notifications in all specialized actions: tier change, score recalculation, seed run, bulk import",
        "Success messages follow the pattern: '{Action} {table} successfully' (e.g., 'Created user successfully', 'Deleted 5 alerts successfully')",
        "Error messages show the actual error message from the API response error object",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 56,
      "passes": false
    },
    {
      "id": "OPS-057",
      "title": "Keyboard shortcuts for common actions",
      "description": "As an admin, I want keyboard shortcuts for common dashboard actions so that I can navigate and act more efficiently.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/hooks/useKeyboardShortcuts.ts",
        "Implement a useKeyboardShortcuts hook that registers global keydown event listeners and cleans them up on unmount",
        "Support shortcuts: Ctrl/Cmd+K to focus the search input (by calling a passed focusSearch callback), Escape to close any open modal, Ctrl/Cmd+N to open the create modal on table pages, Ctrl/Cmd+E to trigger export dropdown",
        "Shortcuts should not trigger when user is typing in an input, textarea, or select element (check event.target.tagName)",
        "Shortcuts should work with both Ctrl (Windows/Linux) and Cmd (Mac) modifier keys via event.metaKey || event.ctrlKey",
        "Use the hook in Layout.tsx for global shortcuts and in individual table pages for page-specific shortcuts",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 57,
      "passes": false
    },
    {
      "id": "OPS-058",
      "title": "Responsive design for mobile and tablet",
      "description": "As an admin, I want the dashboard to be usable on mobile and tablet devices so that I can check metrics on the go.",
      "acceptanceCriteria": [
        "Sidebar collapses to a hamburger menu on screens < 768px width (md breakpoint) using TailwindCSS responsive classes and state management in Layout.tsx",
        "StatCards on Dashboard stack vertically on mobile (1 column) and use a 2-column grid on tablet (md:grid-cols-2) before expanding to 3 or 4 columns on desktop (lg:grid-cols-4)",
        "Charts in Dashboard are wrapped in ResponsiveContainer (already from Recharts) and stack vertically on mobile (the two-column chart layout becomes single column on md breakpoint)",
        "DataTable becomes horizontally scrollable on mobile using overflow-x-auto on the table wrapper div",
        "Modals take full width on mobile (max-w-full on small screens, max-w-lg on desktop)",
        "FilterBar filters stack vertically on mobile (flex-col on small screens, flex-row on md+)",
        "All interactive elements have minimum touch target size of 44x44px on mobile",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 58,
      "passes": false
    },
    {
      "id": "OPS-059",
      "title": "Loading states and error boundaries",
      "description": "As an admin, I want graceful loading and error states so that the dashboard never shows a blank screen or unhandled crash.",
      "acceptanceCriteria": [
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/LoadingSpinner.tsx - centered spinning animation component with optional size prop (sm, md, lg)",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/ErrorBoundary.tsx - React error boundary class component that catches render errors and displays a fallback UI with error message and 'Retry' button that resets the error state",
        "Create /Users/manav/Space/code/vettr-ops-dashboard/src/components/PageSkeleton.tsx - full-page loading skeleton with animated gray bars mimicking the layout of a typical table page (search bar, filter bar, table rows)",
        "Wrap each route's page component in ErrorBoundary in the router configuration",
        "All pages show PageSkeleton while their initial data is loading (isLoading=true from hooks)",
        "All pages show a centered error message with a 'Retry' button when data fetching fails, where 'Retry' calls refetch() from the query hook",
        "The Layout component itself is NOT wrapped in ErrorBoundary (so sidebar remains visible even if page content errors)",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 59,
      "passes": false
    },
    {
      "id": "OPS-060",
      "title": "URL synchronization for table state",
      "description": "As an admin, I want table filters, search, sort, and page to be synced to the URL so that I can share links and use browser back/forward navigation.",
      "acceptanceCriteria": [
        "Create file /Users/manav/Space/code/vettr-ops-dashboard/src/hooks/useUrlState.ts",
        "Export a useUrlState hook that reads initial table state (search, sort, page, pageSize, filters) from URL query parameters using React Router's useSearchParams",
        "When table state changes (setSearch, setSort, setPage, setPageSize, setFilters): update the URL query params using setSearchParams without triggering a full page reload",
        "URL param mapping: ?search=text, ?sort=column:direction, ?page=1, ?pageSize=25, ?filter_tier=pro&filter_authProvider=email",
        "Empty or default values are omitted from the URL to keep it clean (e.g., page=1 and pageSize=25 are not included when they're defaults)",
        "Integrate useUrlState into the useTable hook so that all table pages automatically sync state to URL",
        "Browser back/forward navigation correctly restores the previous table state",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 60,
      "passes": false
    },
    {
      "id": "OPS-061",
      "title": "Backend integration tests for admin CRUD endpoints",
      "description": "As a developer, I want integration tests for the admin CRUD endpoints so that I can verify the list, get, create, update, and delete operations work correctly.",
      "acceptanceCriteria": [
        "Create test file at tests/admin-crud.test.ts in the vettr-backend project",
        "Test the generic CRUD endpoints using the /v1/admin/users endpoint as the test subject (or a suitable table)",
        "Test GET /v1/admin/users returns 200 with paginated response shape: { success: true, data: { items: Array, pagination: { total, limit, offset, has_more } }, meta: { timestamp, request_id } }",
        "Test GET /v1/admin/users?search=test returns filtered results where search matches across email or displayName",
        "Test GET /v1/admin/users?sort=createdAt:desc returns records sorted by createdAt descending",
        "Test GET /v1/admin/users?filter_tier=free returns only free tier users",
        "Test GET /v1/admin/users/:id returns 200 with single user record when ID exists, and 404 with error response when ID does not exist",
        "Test POST /v1/admin/users creates a record and returns 201",
        "Test PUT /v1/admin/users/:id updates a record and returns 200",
        "Test DELETE /v1/admin/users/:id deletes a record and returns 200, and returns 404 for non-existent ID",
        "Test that all endpoints return 401 without X-Admin-Secret header",
        "All tests use vitest (the project's test runner: npm run test)",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 61,
      "passes": false
    },
    {
      "id": "OPS-062",
      "title": "Backend integration tests for analytics endpoints",
      "description": "As a developer, I want integration tests for the analytics endpoints so that I can verify aggregation queries return correct data shapes.",
      "acceptanceCriteria": [
        "Create test file at tests/admin-analytics.test.ts in the vettr-backend project",
        "Test GET /v1/admin/analytics/user-growth returns 200 with { success: true, data: { data: Array<{ date: string, count: number }> } }",
        "Test GET /v1/admin/analytics/score-distribution returns 200 with array of { range, count } objects covering all score buckets",
        "Test GET /v1/admin/analytics/red-flag-trends returns 200 with array of { date, severity, count } objects",
        "Test GET /v1/admin/analytics/filing-activity returns 200 with array of { date, count } objects",
        "Test GET /v1/admin/analytics/alert-activity returns 200 with array of { date, count } objects",
        "Test GET /v1/admin/analytics/tier-breakdown returns 200 with array of { tier, count } objects",
        "Test GET /v1/admin/analytics/stock-health returns 200 with { lowest_scores: Array, most_flags: Array }",
        "Test that all analytics endpoints return 401 without X-Admin-Secret header",
        "All tests use vitest",
        "npm run build passes with no TypeScript errors"
      ],
      "priority": 62,
      "passes": false
    },
    {
      "id": "OPS-063",
      "title": "Frontend component unit tests",
      "description": "As a developer, I want unit tests for key frontend components so that I can catch regressions in the UI layer.",
      "acceptanceCriteria": [
        "Install vitest, @testing-library/react, @testing-library/jest-dom, and jsdom as dev dependencies in the vettr-ops-dashboard project",
        "Configure vitest in vite.config.ts or vitest.config.ts with jsdom environment",
        "Create test file /Users/manav/Space/code/vettr-ops-dashboard/src/components/__tests__/DataTable.test.tsx testing: renders column headers, renders row data, calls onSort when sortable header clicked, calls onEdit/onDelete when action buttons clicked, shows loading skeleton when loading=true, shows empty state when data is empty",
        "Create test file for SearchInput: tests that onSearch is called with debounced value, clear button resets input",
        "Create test file for Modal: tests that modal renders when isOpen=true, does not render when isOpen=false, calls onClose when overlay or X button clicked",
        "Create test file for Badge: tests that correct variant class is applied for each variant prop",
        "All tests pass when running npm run test in the vettr-ops-dashboard directory",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 63,
      "passes": false
    },
    {
      "id": "OPS-064",
      "title": "README documentation for ops dashboard",
      "description": "As a developer, I want a README documenting how to set up and run the ops dashboard so that new contributors can get started quickly.",
      "acceptanceCriteria": [
        "Create /Users/manav/Space/code/vettr-ops-dashboard/README.md",
        "Include project overview: VETTR Ops Dashboard - admin interface for managing the VETTR platform",
        "Include tech stack section: React 18, TypeScript, Vite, TailwindCSS v4, TanStack Query v5, Recharts v2, React Router v7",
        "Include prerequisites: Node.js 20+, vettr-backend running on localhost:3000 with ADMIN_SECRET configured",
        "Include setup instructions: git clone, npm install, npm run dev (starts on localhost:5173), environment variables (VITE_API_URL if not using proxy)",
        "Include available scripts: npm run dev, npm run build, npm run test, npm run preview",
        "Include section on connecting to the backend: Vite proxy configuration, ADMIN_SECRET usage, CORS setup",
        "npm run build passes in the vettr-ops-dashboard directory"
      ],
      "priority": 64,
      "passes": false
    },
    {
      "id": "OPS-065",
      "title": "Docker Compose for full-stack local development",
      "description": "As a developer, I want a Docker Compose configuration so that I can run the complete stack (backend, frontend, Postgres, Redis) with a single command.",
      "acceptanceCriteria": [
        "Create /Users/manav/Space/code/vettr-ops-dashboard/docker-compose.yml",
        "Define service 'postgres': uses postgres:16-alpine image, exposes port 5432, sets POSTGRES_USER=vettr, POSTGRES_PASSWORD=vettr_dev, POSTGRES_DB=vettr, persists data to named volume",
        "Define service 'redis': uses redis:7-alpine image, exposes port 6379",
        "Define service 'backend': builds from the vettr-backend directory (or references its Dockerfile), exposes port 3000, depends_on postgres and redis, sets environment variables: DATABASE_URL=postgresql://vettr:vettr_dev@postgres:5432/vettr, REDIS_URL=redis://redis:6379, ADMIN_SECRET=dev-admin-secret, CORS_ORIGIN=http://localhost:5173",
        "Define service 'frontend': builds from the vettr-ops-dashboard directory with a simple Dockerfile (node:20-alpine, npm install, npm run build, npx serve -s dist -l 5173) or uses npm run dev, exposes port 5173, depends_on backend",
        "Running docker-compose up starts all four services and the dashboard is accessible at http://localhost:5173",
        "Include a .dockerignore file in the vettr-ops-dashboard directory ignoring node_modules, dist, .git",
        "npm run build passes in the vettr-ops-dashboard directory (the file creation itself should not break the build)"
      ],
      "priority": 65,
      "passes": false
    }
  ]
}
